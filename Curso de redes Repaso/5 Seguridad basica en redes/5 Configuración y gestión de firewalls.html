<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>27 - Configuraci√≥n y gesti√≥n de Firewalls</title>
<style>
  :root { --ok:#16a34a; --bad:#dc2626; --muted:#6b7280; --card:#06b6d4; --accent:#0e7490; }
  body { font-family: system-ui, Arial, sans-serif; margin: 24px; line-height:1.45; background:#ecfeff;}
  header { border:2px solid #a5f3fc; border-left:8px solid var(--card); padding:16px; border-radius:14px; background:#fff; margin-bottom:24px;}
  h1 { margin-top:0; }
  h2 { margin:18px 0 8px; }
  .pill { display:inline-block; background:#cffafe; color:#164e63; padding:2px 10px; border-radius:999px; font-size:.9rem; margin-bottom:8px;}
  .card { background:#fff; border:1px solid #a5f3fc; border-radius:12px; padding:10px 12px; margin:6px 0;}
  .story { background:#fff; border:1px dashed #67e8f9; padding:12px; border-radius:12px; }
  .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:10px; }
  .novato { border:1px solid #a5f3fc; border-left:6px solid var(--accent); background:#ecfeff; padding:14px; border-radius:12px; margin: 14px 0;}
  .novato .cols {display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:12px;}
  .quiz-card { border:1px solid #a5f3fc; border-radius:14px; background:#fff; margin:24px 0; }
  .legend{padding:12px 16px; border-bottom:1px solid #a5f3fc; background:#f0fdfa; color:#134e4a;}
  .qwrap{padding:16px;}
  .q{border:1px solid #a5f3fc; border-radius:12px; padding:12px; margin:12px 0;}
  label{display:block; padding:6px 10px; border-radius:10px; border:1px solid #a5f3fc; margin:6px 0;}
  .correct{background:#dcfce7; border-color:#bbf7d0;}
  .incorrect{background:#fee2e2; border-color:#fecaca;}
  .feedback,.success,.hint{display:none; margin-top:8px; padding:8px 10px; border-radius:10px;}
  .feedback{border-left:4px solid var(--bad); background:#fff1f2;}
  .success{border-left:4px solid var(--ok); background:#ecfdf5;}
  .hint{border-left:4px solid var(--accent); background:#ecfeff; color:#134e4a;}
  .hint-btn{margin-top:4px; padding:6px 10px; border-radius:10px; background:#1f2937; color:#fff; cursor:pointer; border:none;}
  .toolbar-bottom{display:flex; gap:10px; padding:12px 16px; border-top:1px solid #a5f3fc; background:#f0fdfa;}
  .toolbar-bottom button{padding:10px 14px; border-radius:12px; border:1px solid #a5f3fc; cursor:pointer;}
  .primary{background:#111827; color:#fff;}
  .secondary{background:#f3f4f6; color:#111827;}
  .score{margin-left:auto; font-weight:bold;}
</style>
</head>
<body>
<header>
<div class="pill">Cap√≠tulo 27</div>
<h1>Configuraci√≥n y gesti√≥n de Firewalls</h1>

<h2>üßæ Explicaci√≥n General</h2>
<div class="card">
Un <b>firewall bien configurado</b> es la primera l√≠nea de defensa en seguridad de red.  
Funciona aplicando <b>reglas de filtrado</b> para decidir qu√© tr√°fico entra o sale, bas√°ndose en <b>IP, puertos, protocolos y aplicaciones</b>.  
Tambi√©n requiere <b>monitoreo constante</b> y <b>actualizaci√≥n de reglas</b> frente a nuevas amenazas.  
</div>

<h2>üß© Conceptos Clave (como si tuvieras 10 a√±os)</h2>
<div class="card">
Imagina que tu firewall es un <b>portero</b> en un edificio:  
- Tiene una <b>lista de invitados</b> (reglas) que pueden pasar.  
- Si alguien no est√° en la lista, lo detiene.  
- Cada tanto actualiza su lista, porque aparecen nuevos intrusos.  
- Si no actualizas la lista, cualquiera podr√≠a entrar.  
</div>

<h2>üìö Desglose del texto</h2>
<div class="grid">
  <div class="card">
    <ul>
      <li><b>Reglas de filtrado:</b> definen qu√© tr√°fico se permite o bloquea.</li>
      <li><b>ACL (Access Control Lists):</b> se configuran en routers y firewalls.</li>
      <li><b>Ejemplo pr√°ctico:</b> denegar acceso de una red a otra en Packet Tracer.</li>
      <li><b>Wildcard mask:</b> define qu√© parte de la IP comparar.</li>
      <li><b>Mantenimiento:</b> monitoreo y actualizaci√≥n continua.</li>
    </ul>
  </div>
</div>

<h2>Ejemplo de configuraci√≥n en Packet Tracer</h2>
<div class="card">
<pre>
Router> enable
Router# configure terminal
Router(config)# access-list 101 deny ip 192.168.2.0 0.0.0.255 192.168.1.0 0.0.0.255
Router(config)# access-list 101 permit ip any any
Router(config)# interface gigabitEthernet0/0
Router(config-if)# ip access-group 101 in
Router(config-if)# end
Router# write memory
</pre>
üëâ Esto bloquea el tr√°fico de la red 192.168.2.0 hacia la 192.168.1.0, pero permite el resto.
</div>

<h2>Historia breve</h2>
<div class="story">
En 2017, una empresa de medios sufri√≥ accesos no autorizados por no actualizar sus reglas de firewall.  
Tras el incidente, configuraron ACLs espec√≠ficas y un sistema de monitoreo en tiempo real.  
Resultado: redujeron en un 90% los intentos exitosos de intrusi√≥n.  
</div>

<section class="novato">
  <h3>Modo Novato</h3>
  <div class="cols">
    <div class="card">
      <b>Pasos b√°sicos</b>
      <ul>
        <li>1. Define qu√© tr√°fico quieres permitir (ej: web, correo).</li>
        <li>2. Bloquea todo lo dem√°s por defecto.</li>
        <li>3. Aplica reglas en la interfaz correcta (in/out).</li>
        <li>4. Revisa logs del firewall regularmente.</li>
        <li>5. Actualiza las reglas con frecuencia.</li>
      </ul>
    </div>
    <div class="card">
      <b>Errores comunes</b>
      <ul>
        <li>Dejar reglas demasiado abiertas.</li>
        <li>No usar ‚Äúdeny any‚Äù al final.</li>
        <li>Aplicar ACL en la interfaz equivocada.</li>
        <li>No verificar el efecto con pruebas de conectividad.</li>
      </ul>
    </div>
  </div>
</section>

<h2>Resumen para repaso</h2>
<ul>
  <li>Los firewalls funcionan con reglas de filtrado.</li>
  <li>Las ACL en Cisco definen qu√© tr√°fico pasa o se bloquea.</li>
  <li>Es crucial monitorear y actualizar reglas.</li>
  <li>Un firewall mal configurado es casi tan peligroso como no tenerlo.</li>
</ul>

<h2>Resumen expr√©s (5 l√≠neas)</h2>
<div class="card">
1. Firewall = portero de la red.<br>
2. Se configura con reglas (ACLs).<br>
3. Packet Tracer permite practicar con ejemplos.<br>
4. Se debe bloquear por defecto y permitir lo necesario.<br>
5. Monitoreo y actualizaci√≥n = seguridad continua.
</div>
</header>

<section class="quiz-card">
<div class="legend">Preguntas de una sola respuesta. Usa <b>Pista</b> antes de corregir.</div>
<div class="qwrap" id="quiz"></div>
<div class="toolbar-bottom">
  <button id="btn-correct" class="primary">Corregir</button>
  <button id="btn-shuffle" class="secondary">Barajar</button>
  <button id="btn-reset" class="secondary">Reiniciar</button>
  <span id="score" class="score"></span>
</div>
</section>

<script>
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}

const BANK=[
 // B√°sicas
 {text:"¬øQu√© es una ACL en Cisco?",options:[{t:"Una lista de control de acceso que filtra tr√°fico",ok:true},{t:"Una tabla de contrase√±as",ok:false}],hint:"Controla tr√°fico permitido o bloqueado.",explain:"ACL = Access Control List, define qu√© tr√°fico pasa o se bloquea."},
 {text:"¬øQu√© significa 'deny' en una regla de firewall?",options:[{t:"Bloquear tr√°fico",ok:true},{t:"Permitir tr√°fico",ok:false}],hint:"Lo rechaza.",explain:"La acci√≥n 'deny' impide que el tr√°fico coincidente pase."},
 {text:"¬øQu√© comando aplica una ACL a una interfaz en Cisco?",options:[{t:"ip access-group",ok:true},{t:"enable secret",ok:false}],hint:"Se usa en interfaces.",explain:"El comando ip access-group asocia la ACL con una interfaz."},
 {text:"¬øPor qu√© es importante actualizar las reglas de firewall?",options:[{t:"Para adaptarse a nuevas amenazas",ok:true},{t:"Para aumentar velocidad de red",ok:false}],hint:"Amenazas cambian.",explain:"Las amenazas evolucionan, por eso las reglas deben actualizarse."},
 {text:"¬øQu√© m√°scara se usa en ACLs para definir rangos?",options:[{t:"Wildcard mask",ok:true},{t:"Subnet mask",ok:false}],hint:"La inversa de la m√°scara de subred.",explain:"La wildcard mask define qu√© bits comparar y cu√°les ignorar."},
 // Profesionales
 {text:"¬øQu√© error com√∫n puede dejar expuesta una red?",options:[{t:"Aplicar ACL en la interfaz equivocada",ok:true},{t:"Bloquear tr√°fico innecesario",ok:false}],hint:"Lugar equivocado.",explain:"Si aplicas la ACL en la interfaz incorrecta, no protege donde debe."},
 {text:"¬øQu√© significa 'deny ip any any' al final de una ACL?",options:[{t:"Bloquea todo el tr√°fico no permitido expl√≠citamente",ok:true},{t:"Permite todo",ok:false}],hint:"Regla impl√≠cita.",explain:"Sirve para negar cualquier tr√°fico que no coincida con reglas previas."},
 {text:"¬øC√≥mo verificar si una ACL funciona en Packet Tracer?",options:[{t:"Haciendo ping entre dispositivos",ok:true},{t:"Cambiando contrase√±as",ok:false}],hint:"Prueba conectividad.",explain:"Un ping muestra si el tr√°fico est√° permitido o bloqueado."},
 {text:"¬øQu√© regla b√°sica debe seguir la administraci√≥n de ACLs?",options:[{t:"Permitir lo necesario, negar el resto",ok:true},{t:"Permitir todo por defecto",ok:false}],hint:"Menor privilegio.",explain:"El principio de m√≠nimo privilegio dicta permitir solo lo necesario."},
 {text:"En un entorno con teletrabajo, ¬øqu√© debes ajustar en el firewall?",options:[{t:"Permitir VPN segura y limitar accesos externos",ok:true},{t:"Desactivar reglas para comodidad",ok:false}],hint:"Acceso remoto seguro.",explain:"Se habilitan conexiones seguras (VPN) sin abrir todo el tr√°fico."}
];

let QUESTIONS=[];
const quiz=document.getElementById('quiz');
const scoreEl=document.getElementById('score');

function createQuestionEl(q,idx){
 const w=document.createElement('div'); w.className='q';
 const p=document.createElement('p'); p.innerHTML=`<b>${idx+1}.</b> ${q.text}`; w.appendChild(p);
 const opts=shuffle(q.options.map(o=>({...o})));
 opts.forEach((o,i)=>{
   const id=`q${idx}_opt${i}`;
   const label=document.createElement('label'); label.setAttribute('for',id);
   const input=document.createElement('input'); input.type='radio'; input.name=`q${idx}`; input.id=id; input.value=o.ok?'true':'false';
   label.appendChild(input); label.insertAdjacentText('beforeend',' '+o.t); w.appendChild(label);
 });
 const hintBtn=document.createElement('button'); hintBtn.type='button'; hintBtn.textContent='Pista'; hintBtn.className='hint-btn';
 const hintBox=document.createElement('div'); hintBox.className='hint'; hintBox.innerHTML=q.hint;
 w.appendChild(hintBtn); w.appendChild(hintBox);
 const fb=document.createElement('div'); fb.className='feedback'; w.appendChild(fb);
 const ok=document.createElement('div'); ok.className='success'; ok.textContent='‚úÖ ¬°Correcto!'; w.appendChild(ok);
 hintBtn.addEventListener('click',()=>{hintBox.style.display='block'; hintBtn.disabled=true;});
 return w;
}

function buildQuiz(){quiz.innerHTML=''; QUESTIONS=shuffle(BANK.map(q=>({...q, options:q.options.map(o=>({...o}))}))); QUESTIONS.forEach((q,i)=>quiz.appendChild(createQuestionEl(q,i))); scoreEl.textContent='';}

function evaluateQuestion(node){
 const labels=Array.from(node.querySelectorAll('label')); let ok=false; let selected=null; let correct=null;
 labels.forEach(l=>{l.classList.remove('correct','incorrect'); const input=l.querySelector('input'); if(input.value==='true') correct=l; if(input.checked){selected=l; ok=(input.value==='true');}});
 const fb=node.querySelector('.feedback'); const okBox=node.querySelector('.success');
 if(ok){if(correct) correct.classList.add('correct'); okBox.style.display='block'; fb.style.display='none';}
 else{if(selected) selected.classList.add('incorrect'); if(correct) correct.classList.add('correct'); okBox.style.display='none'; fb.innerHTML=`<b>Respuesta correcta:</b> ${correct?correct.textContent.trim():''}<div>${QUESTIONS.find(q=>q.text===node.querySelector('p').innerText.replace(/^\d+\.\s*/,'')).explain}</div>`; fb.style.display='block';}
 return ok;
}

function correctAll(){const nodes=document.querySelectorAll('.q'); let right=0; nodes.forEach(n=>{if(evaluateQuestion(n)) right++;}); scoreEl.textContent=`Puntuaci√≥n: ${right} / ${nodes.length}`;}
function resetQuiz(){buildQuiz();}

document.getElementById('btn-correct').addEventListener('click',correctAll);
document.getElementById('btn-shuffle').addEventListener('click',buildQuiz);
document.getElementById('btn-reset').addEventListener('click',resetQuiz);

buildQuiz();
</script>
</body>
</html>
